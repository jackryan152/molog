{
  "bootstrap":{
    "broker":{
      "module":"wishbone.io_modules.broker",
      "class":"Broker",
      "variables":{
        "host":"sandbox",
        "vhost":"/",
        "username":"guest",
        "password":"guest",
        "consume_queue":"logstash",
        "prefetch_count":100,
        "no_ack":true
      }
    },
    "validateLogStashData":{
      "module":"wishbone.modules.jsonvalidator",
      "class":"JSONValidator",
      "variables":{
        "schema":"/etc/molog/broker.schema",
        "convert":true
      }
    },
    "store_es":{
      "module":"molog",
      "class":"StoreES",
      "variables":{
        "host":"sandbox:9200"
      }
    },    
    "matches":{
      "module":"molog",
      "class":"Matches",
      "variables":{
        "host":"sandbox",
        "database":"molog",
        "collection":"chains",
        "port":27017
      }
    },
    "nagiosCheckResult":{
      "module":"molog",
      "class":"NagiosCheckResult",
      "variables":{
         "warning":[
               "3",
         "4"
      ],
      "critical":[
         "0",
         "1",
         "2"
      ],
      "exchange":"",
      "routing_key":"nagios_check_results"
      }
    }
  },
  "routingtable":{
    "broker.inbox":[
      "validateLogStashData.inbox"
    ],
    "validateLogStashData.outbox":[
      "matches.inbox"
    ],
    "matches.outbox":[
      "store_es.inbox"
    ],
    "store_es.outbox":[
      "nagiosCheckResult.inbox"
    ],
    "nagiosCheckResult.outbox":[
      "broker.outbox"
    ]    
  }
}
